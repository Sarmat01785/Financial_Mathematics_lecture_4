# Урок 4. Применение теории вероятностей и математической статистики в экономике и финансах

## Теория вероятностей

`Теория вероятностей` — это раздел математики, занимающийся изучением случайных событий и вероятностей, с которыми эти события происходят. Она предоставляет математический фундамент для прогнозирования возможности наступления тех или иных событий и является ключевым инструментом во многих областях, включая экономику и финансы.

`Вероятность события` — это мера, которая указывает, насколько вероятно, что событие произойдет, и она варьируется от 0 (событие никогда не произойдет) до 1 (событие произойдет наверняка).

### Применение в экономике и финансах:

- **Оценка рисков**: Теория вероятностей позволяет оценить риск потерь при инвестициях или запуске новых проектов.
- **Принятие решений**: С помощью вероятностных моделей можно принимать обоснованные финансовые и экономические решения, учитывая неопределенность и изменчивость рыночных условий.
- **Ценообразование опционов**: В финансах для ценообразования производных инструментов, таких как опционы и фьючерсы, используются вероятностные модели.
- **Статистический анализ**: Теория вероятностей тесно связана с математической статистикой и используется для анализа и интерпретации данных.

Теория вероятностей играет важную роль в моделировании и прогнозировании в финансовом анализе и эконометрике, помогая управлять неопределенностью и принимать взвешенные экономические решения.

## Основные термины теории вероятностей:

Теория вероятностей использует ряд базовых понятий и терминов для описания и анализа случайных явлений.

### Случайное событие
`Случайное событие` — это событие, которое может произойти или не произойти в результате эксперимента или наблюдения, и его наступление не может быть предсказано с абсолютной уверенностью.

### Исход
`Исход` — это один из возможных результатов случайного эксперимента или процесса.

### Пространство элементарных исходов
`Пространство элементарных исходов (или пространство событий)` — это набор всех возможных исходов случайного эксперимента.

### Вероятность
`Вероятность` — это мера, которая указывает, насколько вероятно наступление определенного события, и она измеряется числом между 0 и 1.

### Условная вероятность
`Условная вероятность` — это вероятность наступления одного события при условии, что другое событие уже произошло.

### Независимые события
`Независимые события` — это события, наступление одного из которых не влияет на вероятность наступления другого.

### Зависимые события
`Зависимые события` — это события, наступление одного из которых влияет на вероятность наступления другого.

### Случайная величина
`Случайная величина` — это численное представление результата случайного процесса.

### Свойства случайных величин:

Случайные величины могут быть:

- **Дискретными**: принимают одно из определенного набора значений.

- **Непрерывными**: принимают любое значение внутри некоторого интервала.

### Распределение вероятностей
`Распределение вероятностей` — это математическое описание того, как вероятности распределены между возможными значениями случайной величины.

### Математическое ожидание
`Математическое ожидание (или среднее значение) случайной величины` — это сумма произведений каждого значения случайной величины на его вероятность.

### Дисперсия
`Дисперсия случайной величины` — это мера разброса значений вокруг математического ожидания.

### Стандартное отклонение
`Стандартное отклонение` — это квадратный корень из дисперсии, описывающий степень разброса значений случайной величины относительно среднего.

Эти понятия являются фундаментальными для понимания и применения теории вероятностей в экономике, финансах, статистике и многих других областях.

### Определения

`Случайное событие:` событие, у которого нет заранее известного исхода, и набор вероятных исходов у такого события всегда больше одного.

`Случайная величина:` величина, значение которой меняется в зависимости от случая (т.е. неопределенности).

`Вероятность:` мера возможности наступления некоторого события, определяемая числом в интервале от 0 до 1 (где 0 означает абсолютную невозможность, а 1 - достоверность).

`Условная вероятность:` вероятность наступления события А при условии наступления события B.

`Математическая статистика:` раздел математики, изучающий методы описания и анализа данных наблюдений и экспериментов для прогнозирования случайных событий.

`Генеральная совокупность:` набор всех возможных значений, которые случайная величина может принимать за все время наблюдения.

`Выборка:` некоторое подмножество исторических значений случайной величины, представляющее собой часть генеральной совокупности.

`Функция вероятности p(x):` зависимость вероятности появления определенного значения "x" случайной величины X от этого значения.

`Среднее значение случайной величины (математическое ожидание):` среднее арифметическое всех значений, которые входят в рассматриваемый период.

`Медиана:` значение случайной величины, которое делит упорядоченный набор данных на две равные половины.

`Мода:` значение случайной величины, которое встречается наиболее часто в историческом наборе данных.

`Дисперсия:` мера разброса значений случайной величины относительно ее математического ожидания.

`Среднеквадратичное отклонение (СКО):` квадратный корень из дисперсии.

### Дополнительные определения

`Доходность актива:` процентная величина, на которую изменяется стоимость актива за определенный период времени.

`Акция:` ценная бумага, предоставляющая владельцу право на долю в компании и участие в распределении прибыли в форме дивидендов.

`Риск:` количественная оценка возможных потерь и их вероятности из-за неопределенности будущих событий, часто измеряемая волатильностью доходности актива.

`Инвестиционный портфель:` совокупность финансовых активов, управляемых как единое целое, с учетом зависимостей доходности и риска между отдельными активами.

`Диверсификация:` стратегия снижения риска инвестиционного портфеля путем добавления различных активов или активных классов, что помогает распределить риски и повысить стабильность доходности.

### Вероятность и ожидаемое значение

`Вероятность` – это мера возможности наступления некоторого события. Она определяется как число в интервале от 0 до 1, где 0 обозначает абсолютную невозможность, а 1 – достоверность. Чем выше вероятность события, тем более мы уверены в том, что событие произойдет. Вероятность события X обычно обозначается как P(X).

Знание вероятности позволяет нам найти ожидаемое значение случайной величины. Формула для расчета ожидаемого значения выглядит следующим образом:

E(X) = X1*P(X1) + X2*P(X2) + ... + Xn*P(Xn)

Где:
- E(X) - ожидаемое значение (математическое ожидание) случайной величины X.
- Xi - каждое возможное значение случайной величины.
- P(Xi) - вероятность того, что случайная величина примет значение Xi.

Эта формула позволяет нам представить ожидаемое значение как сумму произведений значений случайной величины на соответствующие вероятности, что помогает нам понять, какие значения вносят больший вклад в среднее значение случайной величины.

### Основные формулы теории вероятностей

1. Вероятность события: 
    $$
    P(A) = \frac{n(A)}{n(S)}
    $$
    Где \( P(A) \) - вероятность события A, \( n(A) \) - количество благоприятных исходов, \( n(S) \) - общее количество возможных исходов.

2. Условная вероятность: 
    $$
    P(A|B) = \frac{P(A \cap B)}{P(B)}
    $$
    Где \( P(A|B) \) - вероятность события A при условии, что произошло событие B, \( P(A \cap B) \) - вероятность совместного наступления событий A и B, \( P(B) \) - вероятность события B.

3. Формула полной вероятности:
    $$
    P(A) = \sum_{i=1}^{n} P(A|B_i)P(B_i)
    $$
    Где \( B_1, B_2, \ldots, B_n \) - полная группа событий.

4. Теорема Байеса:
    $$
    P(A|B) = \frac{P(B|A)P(A)}{P(B)}
    $$
    Где \( P(A|B) \) - вероятность события A при условии, что произошло событие B, \( P(B|A) \) - вероятность события B при условии, что произошло событие A, \( P(A) \) и \( P(B) \) - вероятности событий A и B соответственно.

5. Математическое ожидание (ожидаемое значение):
    - Для дискретной случайной величины:
        $$
        E(X) = \sum_{i=1}^{n} X_i P(X_i)
        $$
        Где \( E(X) \) - математическое ожидание случайной величины X, \( X_i \) - каждое возможное значение случайной величины, \( P(X_i) \) - вероятность того, что случайная величина примет значение \( X_i \).

    - Для непрерывной случайной величины:
        $$
        E(X) = \int_{-\infty}^{\infty} x f(x) \, dx
        $$
        Где \( f(x) \) - функция плотности вероятности случайной величины X.

6. Дисперсия:
    $$
    \text{Var}(X) = E[(X - E(X))^2]
    $$
    Где \( \text{Var}(X) \) - дисперсия случайной величины X.

    - Для дискретной случайной величины:
        $$
        \text{Var}(X) = \sum_{i=1}^{n} (X_i - E(X))^2 P(X_i)
        $$

    - Для непрерывной случайной величины:
        $$
        \text{Var}(X) = \int_{-\infty}^{\infty} (x - E(X))^2 f(x) \, dx
        $$

7. Среднеквадратичное отклонение (СКО):
    $$
    \sigma = \sqrt{\text{Var}(X)}
    $$
    Где \( \sigma \) - среднеквадратичное отклонение случайной величины X.

8. Функция распределения (CDF):
    $$
    F(x) = P(X \leq x)
    $$
    Где \( F(x) \) - функция распределения случайной величины X, \( P(X \leq x) \) - вероятность того, что случайная величина X примет значение, меньшее или равное x.

9. Функция плотности вероятности (PDF):
    - Для непрерывной случайной величины:
        $$
        f(x) = \frac{dF(x)}{dx}
        $$
        Где \( f(x) \) - функция плотности вероятности, \( F(x) \) - функция распределения.

    - Для дискретной случайной величины:
        $$
        P(X = x_i) = p(x_i)
        $$
        Где \( p(x_i) \) - вероятность того, что случайная величина примет значение \( x_i \).

Эти формулы являются основными инструментами для анализа и решения задач теории вероятностей и математической статистики.

### Условные вероятности и формула Байеса

10. Условная вероятность:
    Условная вероятность события \( A \) при условии, что событие \( B \) произошло, обозначается \( P(A|B) \) и вычисляется по формуле:
    $$
    P(A|B) = \frac{P(A \cap B)}{P(B)}, \quad P(B) > 0
    $$
    Где \( P(A \cap B) \) - это вероятность совместного наступления событий \( A \) и \( B \), а \( P(B) \) - вероятность наступления события \( B \).

11. Независимость событий:
    События \( A \) и \( B \) называются независимыми, если наступление одного из них не влияет на вероятность наступления другого, то есть:
    $$
    P(A \cap B) = P(A)P(B)
    $$

12. Формула умножения вероятностей:
    Для любых двух событий \( A \) и \( B \), вероятность их совместного наступления может быть найдена по формуле:
    $$
    P(A \cap B) = P(A|B)P(B) = P(B|A)P(A)
    $$
    Это выражение показывает, что вероятность пересечения \( A \) и \( B \) равна вероятности \( B \), умноженной на условную вероятность \( A \), при условии \( B \), или наоборот.

13. Формула Байеса:
    Формула Байеса позволяет обновить вероятность гипотезы \( A \) после того, как становится известно о наступлении события \( B \). Формула выглядит следующим образом:
    $$
    P(A|B) = \frac{P(B|A)P(A)}{P(B)}
    $$
    Здесь \( P(A|B) \) - это условная вероятность \( A \) при условии \( B \), \( P(B|A) \) - условная вероятность \( B \) при условии \( A \), \( P(A) \) - априорная вероятность гипотезы \( A \), и \( P(B) \) - полная вероятность наступления \( B \), которая может быть вычислена по формуле полной вероятности:
    $$
    P(B) = \sum_{i=1}^{n} P(B|A_i)P(A_i)
    $$
    где \( A_1, A_2, \ldots, A_n \) - полный набор взаимоисключающих гипотез.

14. Ожидаемое значение для условного распределения:
    Ожидаемое значение случайной величины \( X \), при условии наступления события \( B \), вычисляется как:
    $$
    E(X|B) = \sum_{i} x_i P(X = x_i | B)
    $$
    для дискретной случайной величины, или
    $$
    E(X|B) = \int x f(x|B) \, dx
    $$
    для непрерывной случайной величины, где \( f(x|B) \) - условная плотность вероятности \( X \) при условии \( B \).

15. Дисперсия для условного распределения:
    Дисперсия случайной величины \( X \), при условии наступления события \( B \), определяется как:
    $$
    \text{Var}(X|B) = E[(X - E(X|B))^2 | B]
    $$
    что для дискретного случая сводится к:
    $$
    \text{Var}(X|B) = \sum_{i} (x_i - E(X|B))^2 P(X = x_i | B)
    $$
    и для непрерывного случая:
    $$
    \text{Var}(X|B) = \int (x - E(X|B))^2 f(x|B) \, dx
    $$

Эти понятия и формулы являются ключевыми в теории вероятностей и статистике, позволяя решать задачи, связанные с условными вероятностями и обновлением вероятностей в свете новой информации.

## Примеры использования формул:

### Задача 1
В городе 85% автомобилей зелёные и 15% – синие.
Свидетель ДТП ночью идентифицировал автомобиль как синий.
Однако известно, что в сумерках человек правильно
идентифицирует цвет в 80% случаев. Какова вероятность,
что автомобиль-нарушитель был действительно синий?

Для решения этой задачи мы можем воспользоваться формулой Байеса. Пусть событие \( A \) - автомобиль нарушитель синий, событие \( B \) - свидетель идентифицировал автомобиль как синий.

Формула Байеса в этом контексте будет выглядеть так:

$$ P(A|B) = \frac{P(B|A)P(A)}{P(B)} $$

Где:
- \( P(A|B) \) - искомая вероятность того, что автомобиль действительно синий при условии, что свидетель опознал его как синий.
- \( P(B|A) \) - вероятность того, что свидетель идентифицирует автомобиль как синий, если он действительно синий (80%).
- \( P(A) \) - априорная вероятность того, что автомобиль синий (15%).
- \( P(B) \) - полная вероятность того, что свидетель идентифицирует автомобиль как синий. Эта вероятность состоит из двух частей: правильное опознание синего автомобиля и ошибочное опознание зеленого автомобиля как синего.

Теперь рассчитаем полную вероятность \( P(B) \):

$$ P(B) = P(B|A)P(A) + P(B|A')P(A') $$

Где:
- \( P(B|A') \) - вероятность того, что свидетель ошибочно идентифицирует автомобиль как синий, если он не синий (зеленый), т.е. 20% (так как в 80% случаев свидетель правильно идентифицирует цвет).
- \( P(A') \) - вероятность того, что автомобиль не синий (зеленый), т.е. 85%.

### Python для вычисления \( P(A|B) \):


```python
# Априорные вероятности
P_A = 0.15  # Вероятность того, что автомобиль синий
P_not_A = 0.85  # Вероятность того, что автомобиль не синий (зеленый)

# Вероятность правильного идентифицирования цвета
P_B_given_A = 0.8
# Вероятность неправильного идентифицирования цвета
P_B_given_not_A = 0.2

# Полная вероятность того, что свидетель опознает автомобиль как синий
P_B = P_B_given_A * P_A + P_B_given_not_A * P_not_A

# Применяем формулу Байеса для вычисления вероятности, что автомобиль действительно синий
P_A_given_B = (P_B_given_A * P_A) / P_B

P_A_given_B
```




    0.4137931034482758



### Вероятность позитивного состояния экономики при росте акции

Задача: Если известны условные вероятности поведения акции в разных состояниях экономики, и известно, что акция выросла, какова вероятность, что состояние экономики позитивное?

#### Дано:
- Вероятности состояния экономики:
    - Позитивное: \( P(\text{Позитивное}) = 0.30 \)
    - Нейтральное: \( P(\text{Нейтральное}) = 0.50 \)
    - Негативное: \( P(\text{Негативное}) = 0.20 \)
- Условные вероятности поведения акции:
    - Рост при позитивном состоянии: \( P(\text{Рост}|\text{Позитивное}) = 0.60 \)
    - Рост при нейтральном состоянии: \( P(\text{Рост}|\text{Нейтральное}) = 0.30 \)
    - Рост при негативном состоянии: \( P(\text{Рост}|\text{Негативное}) = 0.10 \)

#### Решение:
1. Найдем полную вероятность роста акции \( P(\text{Рост}) \):
    $$
    P(\text{Рост}) = P(\text{Рост}|\text{Позитивное}) \cdot P(\text{Позитивное}) + P(\text{Рост}|\text{Нейтральное}) \cdot P(\text{Нейтральное}) + P(\text{Рост}|\text{Негативное}) \cdot P(\text{Негативное})
    $$

2. Подставляем значения и вычисляем:
    $$
    P(\text{Рост}) = 0.60 \cdot 0.30 + 0.30 \cdot 0.50 + 0.10 \cdot 0.20 = 0.18 + 0.15 + 0.02 = 0.35
    $$

3. Применяем формулу Байеса для нахождения вероятности позитивного состояния экономики при условии роста акции \( P(\text{Позитивное}|\text{Рост}) \):
    $$
    P(\text{Позитивное}|\text{Рост}) = \frac{P(\text{Рост}|\text{Позитивное}) \cdot P(\text{Позитивное})}{P(\text{Рост})}
    $$

4. Вычисляем вероятность:
    $$
    P(\text{Позитивное}|\text{Рост}) = \frac{0.60 \cdot 0.30}{0.35} \approx 0.514
    $$

#### Вывод:
Итак, вероятность того, что состояние экономики позитивное при условии, что акция выросла, составляет примерно 0.514 или 51.4%.

### код на Python для вычисления этой вероятности:


```python
# Априорные вероятности состояний экономики
P_positive = 0.30
P_neutral = 0.50
P_negative = 0.20

# Условные вероятности роста акции
P_growth_given_positive = 0.60
P_growth_given_neutral = 0.30
P_growth_given_negative = 0.10

# Полная вероятность роста акции
P_growth = (P_growth_given_positive * P_positive +
            P_growth_given_neutral * P_neutral +
            P_growth_given_negative * P_negative)

# Применяем формулу Байеса для P(Позитивное|Рост)
P_positive_given_growth = (P_growth_given_positive * P_positive) / P_growth

P_positive_given_growth
```




    0.5142857142857143



# Что такое математическая статистика?
`Математическая статистика` – раздел математики, изучающий методы описания и анализа
данных наблюдений и экспериментов с целью прогнозирования случайных событий.
Математическая статистика изучает исторические значения случайной величины и
позволяет на основе их анализа делать прогнозы о будущих значениях => современные
финансы полностью основаны на математической статистике!


### Основные понятия и методы математической статистики:

1. Выборочное исследование:
    - Выборка – набор наблюдений, извлеченных из генеральной совокупности.
    - Генеральная совокупность – полный набор всех возможных наблюдений, по которым делаются выводы.

2. Описательная статистика:
    - Среднее значение (арифметическое среднее) – сумма всех измерений, деленная на их количество.
    - Медиана – значение, разделяющее упорядоченную выборку данных на две равные части.
    - Мода – значение в наборе данных, которое встречается чаще всего.

3. Статистическое распределение:
    - Распределение частот – таблица или график, показывающий частоты различных исходов в выборке.
    - Нормальное распределение – распределение вероятностей, которое часто встречается в природе и социальных науках.

4. Статистическое вывод:
    - Точечные оценки – одно значение, используемое в качестве приближения некоторого параметра популяции.
    - Интервальные оценки – диапазон значений, используемый для оценки параметра с заданным уровнем уверенности.
    - Статистические гипотезы – предположения о параметрах генеральной совокупности, которые могут быть проверены на основе выборочных данных.

5. Оценка параметров:
    - Метод максимального правдоподобия – метод оценки параметров популяции, максимизирующий функцию правдоподобия.
    - Метод моментов – метод оценки параметров популяции, основанный на идеях теории моментов.

6. Проверка статистических гипотез:
    - p-значение – вероятность получить статистические данные, как минимум такие же экстремальные, как и наблюдаемые, при условии, что нулевая гипотеза верна.
    - Ошибка первого рода (ложноположительный результат) – ситуация, когда нулевая гипотеза отвергнута, хотя на самом деле она верна.
    - Ошибка второго рода (ложноотрицательный результат) – ситуация, когда нулевая гипотеза не отвергается, хотя на самом деле она неверна.

7. Регрессионный анализ:
    - Используется для изучения взаимосвязей между переменными и прогнозирования значений одной переменной на основе другой.

8. Временные ряды:
    - Анализ последовательностей данных, собранных в различные моменты времени, часто для идентификации трендов, циклов или других закономерностей.

9. Многомерный статистический анализ:
    - Исследование, включающее одновременное наблюдение и анализ более чем одной статистической переменной.

### Применение математической статистики:

Математическая статистика находит применение во многих областях, включая биологию, экономику, инженерию, медицину, общественные науки и даже спорт. Она позволяет принимать обоснованные решения в условиях неопределенности и прогнозировать будущие события на основе анализа прошлых данных.

# Основные формулы математической статистики включают в себя следующие ключевые выражения, которые используются для анализа данных и вывода статистических заключений:

1. **Среднее значение (арифметическое среднее)**:
    $$
    \bar{x} = \frac{1}{n}\sum_{i=1}^{n}x_i
    $$
    где \( \bar{x} \) - среднее значение, \( x_i \) - i-е наблюдение, \( n \) - количество наблюдений.

2. **Дисперсия**:
    $$
    S^2 = \frac{1}{n-1}\sum_{i=1}^{n}(x_i - \bar{x})^2
    $$
    где \( S^2 \) - выборочная дисперсия, \( \bar{x} \) - среднее значение выборки.

3. **Стандартное отклонение**:
    $$
    S = \sqrt{\frac{1}{n-1}\sum_{i=1}^{n}(x_i - \bar{x})^2}
    $$
    где \( S \) - стандартное отклонение выборки.

4. **Коэффициент вариации**:
    $$
    CV = \frac{S}{\bar{x}} \times 100\%
    $$
    где \( CV \) - коэффициент вариации.

5. **Ковариация**:
    $$
    \text{cov}(X, Y) = \frac{1}{n-1}\sum_{i=1}^{n}(x_i - \bar{x})(y_i - \bar{y})
    $$
    где \( \text{cov}(X, Y) \) - ковариация между двумя переменными \( X \) и \( Y \), \( \bar{x} \) и \( \bar{y} \) - средние значения \( X \) и \( Y \) соответственно.

6. **Коэффициент корреляции Пирсона**:
    $$
    r_{xy} = \frac{\text{cov}(X, Y)}{S_X S_Y}
    $$
    где \( r_{xy} \) - коэффициент корреляции между переменными \( X \) и \( Y \), \( S_X \) и \( S_Y \) - стандартные отклонения \( X \) и \( Y \) соответственно.

7. **Линейное уравнение регрессии**:
    $$
    Y = \beta_0 + \beta_1X + \varepsilon
    $$
    где \( Y \) - зависимая переменная, \( X \) - независимая переменная, \( \beta_0 \) - точка пересечения с осью Y, \( \beta_1 \) - угловой коэффициент регрессионной прямой, \( \varepsilon \) - ошибка модели.

8. **Уравнения оценок коэффициентов регрессии**:
    $$
    \hat{\beta}_1 = \frac{\text{cov}(X, Y)}{\text{var}(X)}
    $$
    $$
    \hat{\beta}_0 = \bar{y} - \hat{\beta}_1\bar{x}
    $$
    где \( \hat{\beta}_1 \) и \( \hat{\beta}_0 \) - оценки коэффициентов регрессии.

9. **Тестовая статистика для проверки гипотез о среднем**:
    $$
    t = \frac{\bar{x} - \mu_0}{S / \sqrt{n}}
    $$
    где \( t \) - значение t-статистики, \( \mu_0 \) - предполагаемое значение среднего в нулевой гипотезе, \( S \) - стандартное отклонение выборки, \( n \) - размер выборки.

10. **p-значение**:
    При заданной тестовой статистике позволяет определить вероятность получения такой статистики (или более экстремальной), если нулевая гипотеза верна.

11. **Интервальные оценки**:
    Для среднего:
    $$
    \bar{x} \pm t_{\alpha/2} \cdot \frac{S}{\sqrt{n}}
    $$
    где \( \bar{x} \) - выборочное среднее, \( t_{\alpha/2} \) - критическое значение t-распределения, \( S \) - стандартное отклонение выборки, \( n \) - размер выборки.

Эти формулы составляют основу аналитических методов в математической статистике и широко используются для анализа данных и принятия решений в различных областях науки и бизнеса.

### `Законы распределения случайных величин` – это математические описания, которые показывают все возможные значения, которые может принимать случайная величина, и как часто эти значения могут встречаться. Они являются основополагающими в теории вероятностей и математической статистике, поскольку позволяют предсказывать вероятности различных событий. Вот некоторые из основных законов распределения:

1. Распределение Бернулли:
    Моделирует случайную величину, которая имеет только два возможных исхода: успех (с вероятностью \( p \)) и неудачу (с вероятностью \( 1-p \)).
    $$
    P(X=k) = \begin{cases} 
    p, & \text{если } k=1, \\
    1-p, & \text{если } k=0. 
    \end{cases}
    $$

2. Биномиальное распределение:
    Описывает количество успехов в серии из \( n \) независимых экспериментов Бернулли.
    $$
    P(X=k) = \binom{n}{k}p^k(1-p)^{n-k}
    $$
    где \( \binom{n}{k} \) - биномиальный коэффициент.

3. Распределение Пуассона:
    Моделирует количество событий в фиксированном интервале времени или пространства, если эти события происходят с постоянной средней скоростью и независимо друг от друга.
    $$
    P(X=k) = \frac{\lambda^k e^{-\lambda}}{k!}
    $$
    где \( \lambda \) - среднее количество событий в интервале.

4. Геометрическое распределение:
    Описывает количество испытаний Бернулли, необходимых для достижения первого успеха.
    $$
    P(X=k) = (1-p)^{k-1}p
    $$

5. Равномерное распределение:
    Все исходы в интервале имеют одинаковую вероятность. Для непрерывного равномерного распределения на интервале \( a, b \):
    $$
    f(x) = \begin{cases} 
    \frac{1}{b-a}, & \text{для } a \leq x \leq b, \\
    0, & \text{иначе}.
    \end{cases}
    $$

6. Нормальное (гауссовское) распределение:
    Одно из наиболее важных распределений в статистике, описывающее множество естественных явлений.
    $$
    f(x) = \frac{1}{\sqrt{2\pi}\sigma}e^{-\frac{(x-\mu)^2}{2\sigma^2}}
    $$
    где \( \mu \) - математическое ожидание, \( \sigma \) - стандартное отклонение.

7. Экспоненциальное распределение:
    Описывает время между последовательными событиями в Пуассоновском процессе.
    $$
    f(x) = \begin{cases} 
    \lambda e^{-\lambda x}, & x \geq 0, \\
    0, & x < 0. 
    \end{cases}
    $$

8. Распределение хи-квадрат:
    Распределение суммы квадратов \( k \) независимых стандартных нормальных случайных величин.
    $$
    f(x) = \frac{1}{2^{k/2}\Gamma(k/2)}x^{k/2-1}e^{-x/2}
    $$

9. Распределение Стьюдента (t-распределение):
    Появляется при оценке среднего нормально распределенной совокупности при неизвестной дисперсии.
    $$
    f(x) = \frac{\Gamma((v+1)/2)}{\sqrt{v\pi}\Gamma(v/2)}\left(1+\frac{x^2}{v}\right)^{-(v+1)/2}
    $$
    где \( v \) - количество степеней свободы.

10. Распределение Фишера (F-распределение):
    Используется для сравнения двух дисперсий и часто встречается в дисперсионном анализе.
    $$
    f(x) = \frac{\sqrt{\frac{(d1x)^{d1}d2^{d2}}{(d1x+d2)^{d1+d2}}}}{x\cdot B\left(\frac{d1}{2}, \frac{d2}{2}\right)}
    $$
    где \( d1 \) и \( d2 \) - степени свободы.

Эти распределения лежат в основе многих статистических методов и тестов, позволяют моделировать различные виды данных и сценарии, и необходимы для понимания статистического анализа и принятия решений на основе данных.

## Описание распределения случайной величины включает в себя определение её вероятностных характеристик, таких как закон распределения, числовые характеристики (математическое ожидание, дисперсия, коэффициент асимметрии и т.д.), а также функции распределения и плотности вероятности.

### Закон распределения
Описывает, как вероятности распределены между возможными исходами случайной величины. Закон распределения может быть:

- Дискретным: Когда случайная величина принимает конечное или счетное число значений, например, распределение Бернулли, биномиальное распределение, распределение Пуассона или геометрическое распределение.
- Непрерывным: Когда случайная величина может принимать любое значение в некотором интервале, например, нормальное распределение (гауссово), экспоненциальное распределение или равномерное распределение.

### Функция распределения (CDF)
Для случайной величины \( X \), функция распределения \( F(x) \) определяется как вероятность того, что \( X \) примет значение меньшее или равное \( x \):
$$
F(x) = P(X \leq x)
$$
Для дискретной случайной величины, CDF является ступенчатой функцией, в то время как для непрерывной случайной величины, она обычно является непрерывной и не убывающей.

### Функция плотности вероятности (PDF)
Для непрерывной случайной величины \( f(x) \) определяется как производная от CDF:
$$
f(x) = F'(x)
$$
PDF описывает относительную вероятность наблюдения значений случайной величины в различных точках её диапазона.

### Математическое ожидание (среднее)
Для дискретной случайной величины:
$$
E(X) = \sum xi P(X = xi)
$$
Для непрерывной случайной величины:
$$
E(X) = \int{-\infty}^{\infty} x f(x) \, dx
$$
Математическое ожидание является средневзвешенным значением всех возможных исходов случайной величины.

### Дисперсия
Показывает степень разброса значений случайной величины вокруг её математического ожидания:
$$
\text{Var}(X) = E[(X - E(X))^2]
$$
Для дискретной случайной величины:
$$
\text{Var}(X) = \sum (xi - E(X))^2 P(X = xi)
$$
Для непрерывной случайной величины:
$$
\text{Var}(X) = \int{-\infty}^{\infty} (x - E(X))^2 f(x) \, dx
$$
Дисперсия измеряется в квадратах единиц измерения случайной величины.

### Стандартное отклонение
Это квадратный корень из дисперсии:
$$
\sigma = \sqrt{\text{Var}(X)}
$$
Стандартное отклонение измеряется в тех же единицах, что и сама случайная величина, и описывает её волатильность или изменчивость.

### Коэффициент асимметрии
Отражает симметрию распределения относительно его среднего:
$$
\text{Skew}(X) = \frac{E(X - E(X))^3}{\sigma^3}
$$
Если распределение симметрично, коэффициент асимметрии равен нулю.

### Коэффициент эксцесса
Характеризует "остроту" пика распределения по сравнению с нормальным распределением:
$$
\text{Kurt}(X) = \frac{E(X - E(X))^4}{\sigma^4} - 3
$$
Для нормального распределения коэффициент эксцесса равен нулю.

Эти характеристики дают полное описание свойств распределения случайных величин и позволяют выполнять статистический анализ и делать предсказания на основании собранных данных.

### Нормальное распределение и центральная предельная теорема

**Нормальное распределение**

Нормальное распределение, также известное как гауссово распределение, является одним из самых важных распределений в теории вероятностей и статистике. Его ключевые свойства включают:

1. **Форма колокола**: Нормальное распределение симметрично относительно среднего значения и имеет форму колокола.
2. **Параметры**: Определяется двумя параметрами - средним значением (μ) и стандартным отклонением (σ).
3. **Функция плотности вероятности (PDF)**:
    $$
    f(x) = \frac{1}{\sigma \sqrt{2\pi}} e^{-\frac{(x - \mu)^2}{2\sigma^2}}
    $$
    Где \( \mu \) - среднее значение, \( \sigma \) - стандартное отклонение, \( e \) - основание натурального логарифма, \( \pi \) - число пи.

4. **Свойства**:
    - Около 68% значений лежат в пределах одного стандартного отклонения от среднего (μ ± σ).
    - Около 95% значений лежат в пределах двух стандартных отклонений от среднего (μ ± 2σ).
    - Около 99.7% значений лежат в пределах трех стандартных отклонений от среднего (μ ± 3σ).

**Центральная предельная теорема (ЦПТ)**

Центральная предельная теорема является фундаментальной теоремой в статистике и теории вероятностей. Она утверждает, что при достаточно большом количестве независимых случайных величин, независимо от исходного распределения, их сумма (или среднее) будет приблизительно нормально распределена. Это позволяет применять нормальное распределение к различным задачам, даже если исходные данные не следуют нормальному распределению.

Формально:

1. Пусть \( X_1, X_2, ..., X_n \) - независимые и одинаково распределенные случайные величины с математическим ожиданием \( \mu \) и дисперсией \( \sigma^2 \).
2. Рассмотрим их сумму:
    $$
    S_n = X_1 + X_2 + ... + X_n
    $$
3. ЦПТ утверждает, что стандартное отклонение суммы \( S_n \) стремится к нормальному распределению с параметрами \( n\mu \) и \( n\sigma^2 \) по мере увеличения \( n \):
    $$
    \frac{S_n - n\mu}{\sqrt{n}\sigma} \xrightarrow{d} N(0, 1)
    $$
    Где \( \xrightarrow{d} \) обозначает сходимость по распределению к стандартному нормальному распределению \( N(0, 1) \).

# Риск и доходность финансовых активов – это два основных понятия, используемых при анализе инвестиций. Они тесно связаны, поскольку потенциально высокая доходность обычно сопровождается повышенным уровнем риска.

### Доходность финансовых активов

Доходность - это общая прибыль или убыток от инвестиций за определенный период времени, выраженная как процент от первоначальной стоимости инвестиций. Доходность может быть рассчитана как:

$$
R = \frac{P{\text{конец}} - P{\text{начало}} + D}{P{\text{начало}}}
$$

где \( P{\text{начало}} \) - цена актива в начале периода, \( P{\text{конец}} \) - цена актива в конце периода, а \( D \) - доход от актива (например, дивиденды).

### Риск финансовых активов

**Риск** - это мера неопределенности относительно ожидаемой доходности инвестиций. В контексте финансовых активов риск часто ассоциируется с волатильностью, то есть с изменчивостью доходности актива. В рамках статистического анализа риск часто измеряется стандартным отклонением или дисперсией доходности:

$$
\text{Риск} = \sigma(R) = \sqrt{\text{Var}(R)}
$$

где \( R \) - доходность, \( \sigma(R) \) - стандартное отклонение доходности, \( \text{Var}(R) \) - дисперсия доходности.

### Соотношение риск-доходность

Инвесторы оценивают инвестиции, сопоставляя ожидаемую доходность с присущим уровнем риска. Обычно, чем выше риск, тем инвестор ожидает более высокой доходности для компенсации увеличенного риска потерь. Соотношение риск-доходность является ключевым фактором при выборе инвестиционного портфеля.

### Диверсификация

Один из основных методов управления риском – диверсификация, то есть распределение инвестиций между различными активами и инструментами. Диверсификация может снизить общий риск портфеля, так как отрицательные результаты одних активов могут быть компенсированы положительными результатами других.

### Модель оценки капитальных активов (CAPM)

Модель CAPM предполагает, что доходность актива должна соответствовать его бета-коэффициенту, который измеряет изменчивость дохода актива относительно рыночного портфеля. Формула CAPM:

$$
E(Ri) = Rf + \betai (E(Rm) - Rf)
$$

где \( E(Ri) \) - ожидаемая доходность актива \( i \), \( Rf \) - безрисковая процентная ставка, \( \betai \) - бета-коэффициент актива \( i \), \( E(Rm) \) - ожидаемая доходность рыночного портфеля.

### Эффективный рыночный портфель

По теории Гарри Марковица, портфель считается эффективным, если нет другого портфеля с той же ожидаемой доходностью и меньшим риском или с более высокой ожидаемой доходностью при том же риске. Эффективный портфель лежит на границе эффективности, которая показывает оптимальное сочетание риск-доходность.

Итак, риск и доходность являются центральными элементами в процессе принятия инвестиционных решений, и их взаимосвязь лежит в основе многих финансовых теорий и моделей.

## Расчет логарифмической доходности

Логарифмическая доходность — это мера изменения цены актива за определенный период времени, выраженная в логарифмах. Она используется для анализа финансовых временных рядов и имеет несколько преимуществ по сравнению с простой доходностью. Формула для расчета логарифмической доходности следующая:

$$
R(i) = \ln\left(\frac{P(i)}{P(i-1)}\right)
$$

где:

- \( R(i) \) — логарифмическая доходность в период \( i \).
- \( \ln \) — натуральный логарифм.
- \( P(i) \) — цена актива в текущий момент времени \( i \).
- \( P(i-1) \) — цена актива в предыдущий момент времени.

### Почему логарифмическая доходность?

1. **Временная аддитивность**: Логарифмические доходности можно суммировать за последовательные периоды для нахождения общей доходности за более длительный временной промежуток.

2. **Асимметрия**: Логарифмические доходности учитывают асимметричный характер процентных изменений цен.

3. **Малые изменения цены**: Для малых процентных изменений цены логарифмическая доходность приблизительно равна простой доходности.

### Пример расчета в Python

Для расчета логарифмической доходности в Python вы можете использовать следующий код:


```python
import numpy as np

# Цены актива в два последовательных периода
Piminus1 = 100  # Цена в предыдущий момент времени
Pi = 110          # Цена в текущий момент времени

# Расчет логарифмической доходности
Ri = np.log(Pi / Piminus1)
print(f"Логарифмическая доходность: {Ri}")
```

    Логарифмическая доходность: 0.09531017980432493
    

## Моделирование цен акций

`Моделирование цен акций` – это процесс использования математических моделей для оценки потенциальных будущих цен акций на фондовом рынке. Это моделирование может быть основано на исторических данных, статистических методах, фундаментальном и техническом анализе или комбинации этих подходов.

### Общие методы моделирования:

1. **Геометрическое Броуновское движение (GBM)**:
   Это один из наиболее популярных методов моделирования путей цен акций, который предполагает, что логарифмическая доходность акции нормально распределена и цены акций следуют непрерывному случайному пути.

2. **Модель случайного блуждания**:
   В этой модели предполагается, что изменение цены акции является случайным и не зависит от предыдущей цены акции, что означает отсутствие четкого тренда.

3. **Модель скачкообразных изменений**:
   Эта модель комбинирует GBM с внезапными "скачками" цен, которые могут происходить из-за внешних событий или новостей.

### Пример моделирования с использованием GBM:


```python
import numpy as np
import matplotlib.pyplot as plt

# Исходные параметры
S0 = 100       # Начальная цена акции
mu = 0.05      # Ожидаемая доходность
sigma = 0.2    # Стандартное отклонение доходности
T = 1.0        # Временной горизонт в годах
dt = 0.01      # Шаг времени
N = round(T/dt) # Количество шагов времени
t = np.linspace(0, T, N)

# Моделирование случайного процесса
W = np.random.standard_normal(size = N) 
W = np.cumsum(W)*np.sqrt(dt) # Стандартное Броуновское движение
X = (mu-0.5*sigma**2)*t + sigma*W 
S = S0*np.exp(X) # Геометрическое Броуновское движение

# Визуализация
plt.plot(t, S)
plt.title('Моделирование цены акции по GBM')
plt.xlabel('Время в годах')
plt.ylabel('Цена акции')
plt.show()
```


    
![png](output_23_0.png)
    


## Риск и неопределённость

В финансовом мире **риск** и **неопределённость** являются ключевыми концепциями, которые инвесторы должны учитывать при принятии решений.

### Риск

Риск относится к вероятности возникновения нежелательных событий и потерь в результате вложений или финансовых действий. Риск можно количественно оценить и часто измеряется стандартным отклонением доходности актива или портфеля. В контексте инвестирования существует несколько видов риска:

- **Систематический риск** (недиверсифицируемый риск) - общий рыночный риск, который нельзя устранить через диверсификацию.
- **Несистематический риск** (диверсифицируемый риск) - риск, связанный с отдельным активом или группой активов, который можно уменьшить через диверсификацию.
- **Кредитный риск** - риск, что заемщик не выплатит основную сумму долга или проценты.
- **Ликвидный риск** - риск, что актив не может быть продан по разумной цене в достаточно короткий срок.

### Неопределённость

Неопределённость относится к невозможности точного предсказания будущих событий. В отличие от риска, неопределённость не всегда может быть измерена или количественно оценена. Она может возникать из-за непредсказуемых событий, таких как политические изменения, естественные катастрофы или революционные технологические прорывы.

### Управление риском

Управление риском включает в себя идентификацию, анализ и принятие мер по минимизации воздействия неожиданных событий. Некоторые стратегии управления риском включают:

- **Диверсификация** - распределение инвестиций между различными активами для снижения риска.
- **Хеджирование** - использование производных финансовых инструментов для защиты от неблагоприятных изменений цен.
- **Страхование** - передача потенциального риска третьей стороне в обмен на страховые взносы.
- **Установление ограничений** - определение максимально допустимых потерь для портфеля или отдельного инвестиционного инструмента.

### Пример: Расчёт риска портфеля

Давайте рассмотрим пример расчёта риска портфеля на основе стандартного отклонения его доходности.


```python
import numpy as np

# Предположим, что у нас есть доходности портфеля за некоторый период времени
returns = np.array((0.01, 0.02, -0.01, 0.03, -0.02))

# Расчёт стандартного отклонения
portfoliorisk = np.std(returns)

print(f"Риск портфеля по стандартному отклонению: {portfoliorisk}")
```

    Риск портфеля по стандартному отклонению: 0.01854723699099141
    

### Анализ инвестиционного портфеля

Анализ инвестиционного портфеля - это процесс оценки эффективности, риска и доходности набора финансовых активов, управляемых как единое целое. Целью анализа является оптимизация состава портфеля для достижения наилучшего соотношения риска и доходности.

#### Основные концепции и показатели анализа портфеля

1. **Доходность портфеля (Portfolio Return)**:
    - Доходность портфеля определяется как взвешенная сумма доходностей отдельных активов:
    $$
    R_p = \sum_{i=1}^{n} w_i R_i
    $$
    Где \( R_p \) - доходность портфеля, \( w_i \) - доля актива i в портфеле, \( R_i \) - доходность актива i.

2. **Риск портфеля (Portfolio Risk)**:
    - Риск портфеля измеряется стандартным отклонением доходности портфеля. Для двух активов формула выглядит следующим образом:
    $$
    \sigma_p = \sqrt{w_1^2 \sigma_1^2 + w_2^2 \sigma_2^2 + 2w_1w_2\sigma_1\sigma_2\rho_{12}}
    $$
    Где \( \sigma_p \) - стандартное отклонение доходности портфеля, \( w_i \) - доля актива i, \( \sigma_i \) - стандартное отклонение доходности актива i, \( \rho_{12} \) - корреляция между доходностями активов 1 и 2.

3. **Ковариационная матрица (Covariance Matrix)**:
    - Для портфеля из более чем двух активов используется ковариационная матрица, которая отображает ковариации между доходностями всех пар активов:
    $$
    \Sigma = \begin{bmatrix}
    \sigma_{1,1} & \sigma_{1,2} & \dots & \sigma_{1,n} \\
    \sigma_{2,1} & \sigma_{2,2} & \dots & \sigma_{2,n} \\
    \vdots & \vdots & \ddots & \vdots \\
    \sigma_{n,1} & \sigma_{n,2} & \dots & \sigma_{n,n} \\
    \end{bmatrix}
    $$
    Где \( \sigma_{i,j} \) - ковариация между доходностями активов i и j.

4. **Шарп-коэффициент (Sharpe Ratio)**:
    - Шарп-коэффициент измеряет доходность портфеля на единицу риска:
    $$
    SR = \frac{R_p - R_f}{\sigma_p}
    $$
    Где \( SR \) - Шарп-коэффициент, \( R_p \) - доходность портфеля, \( R_f \) - безрисковая ставка, \( \sigma_p \) - стандартное отклонение доходности портфеля.

### Пример анализа портфеля на Python

Рассмотрим пример анализа простого инвестиционного портфеля с использованием Python.


```python
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# Данные: доходности трех активов
asset_returns = np.array([
    [0.05, 0.10, 0.15],
    [0.07, 0.04, 0.10],
    [0.03, 0.08, 0.05]
])

# Веса активов в портфеле
portfolio_weights = np.array([0.4, 0.4, 0.2])

# Вычисление доходности портфеля
portfolio_return = np.dot(portfolio_weights, asset_returns.mean(axis=0))
print(f'Доходность портфеля: {portfolio_return:.2f}')

# Ковариационная матрица
cov_matrix = np.cov(asset_returns, rowvar=False)

# Вычисление риска портфеля (стандартное отклонение)
portfolio_risk = np.sqrt(np.dot(portfolio_weights.T, np.dot(cov_matrix, portfolio_weights)))
print(f'Риск портфеля (стандартное отклонение): {portfolio_risk:.2f}')

# Безрисковая ставка
risk_free_rate = 0.02

# Шарп-коэффициент
sharpe_ratio = (portfolio_return - risk_free_rate) / portfolio_risk
print(f'Шарп-коэффициент: {sharpe_ratio:.2f}')
```

    Доходность портфеля: 0.07
    Риск портфеля (стандартное отклонение): 0.02
    Шарп-коэффициент: 2.65
    

### Диверсификация инвестиционного портфеля

**Диверсификация** - это стратегия управления рисками, при которой инвестиции распределяются между различными финансовыми инструментами, отраслями и другими категориями для снижения воздействия любого одного актива или риска. Основная цель диверсификации состоит в том, чтобы минимизировать риск портфеля, не жертвуя при этом доходностью.

#### Основные концепции диверсификации

1. **Распределение активов (Asset Allocation)**:
    - Процесс распределения инвестиций между различными классами активов, такими как акции, облигации, недвижимость и наличные средства. Распределение активов определяется целями инвестора, горизонтом инвестиций и склонностью к риску.

2. **Корреляция активов (Asset Correlation)**:
    - Важный аспект диверсификации - это понимание корреляции между активами. Корреляция измеряет степень, в которой два актива движутся вместе. Активы с низкой или отрицательной корреляцией способствуют большей диверсификации.
    $$
    -1 \leq \rho \leq 1
    $$
    Где \( \rho \) - коэффициент корреляции.

3. **Эффективный портфель (Efficient Portfolio)**:
    - Концепция эффективного портфеля основана на теории Марковица, которая утверждает, что для любого уровня риска можно создать портфель с максимальной ожидаемой доходностью. Набор таких портфелей образует **эффективную границу**.

#### Преимущества диверсификации

- **Снижение риска**: Распределение инвестиций между разными активами снижает влияние негативных событий на один конкретный актив.
- **Стабильность доходности**: Диверсифицированные портфели, как правило, демонстрируют более стабильную доходность со временем.
- **Оптимизация доходности**: Правильная диверсификация позволяет увеличить доходность на единицу риска.

## Пример диверсификации на Python

Рассмотрим пример создания диверсифицированного портфеля и оценки его риска и доходности.


```python
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# Генерация случайных данных для доходностей четырех активов
np.random.seed(42)
asset_returns = np.random.randn(1000, 4)  *  0.01 + 0.001

# Зададим веса для диверсифицированного портфеля
portfolio_weights = np.array([0.25, 0.25, 0.25, 0.25])

# Проверка на отрицательные значения в весовой матрице
if any(portfolio_weights < 0):
    raise ValueError("Весы портфеля не могут содержать отрицательные значения.")

# Вычисление средней доходности и ковариационной матрицы
mean_returns = asset_returns.mean(axis=0)
cov_matrix = np.cov(asset_returns, rowvar=False)

# Доходность портфеля
portfolio_return = np.dot(portfolio_weights, mean_returns)

# Риск портфеля (стандартное отклонение)
portfolio_std_dev = np.sqrt(np.dot(portfolio_weights.T, np.dot(cov_matrix, portfolio_weights)))

# Вывод результатов
print(f"Доходность портфеля: {portfolio_return:.4f}")
print(f"Риск портфеля (стандартное отклонение): {portfolio_std_dev:.4f}")

# Визуализация доходностей активов и портфеля
sns.histplot(asset_returns, kde=True, stat='density', element='step', common_norm=False)
plt.axvline(portfolio_return, color='r', linestyle='--', label='Доходность портфеля')
plt.title('Диверсификация инвестиционного портфеля')
plt.xlabel('Доходность')
plt.ylabel('Плотность')
plt.legend()
plt.show()
```

    Доходность портфеля: 0.0012
    Риск портфеля (стандартное отклонение): 0.0049
    


    
![png](output_31_1.png)
    


#### Заключение
Диверсификация - это ключевой элемент управления инвестиционным портфелем, который помогает уменьшить риск и обеспечить более стабильную доходность. Понимание принципов распределения активов и корреляции между ними позволяет инвесторам создавать эффективные и сбалансированные портфели.

### Ограничение потенциала диверсификации

Хотя диверсификация является важной стратегией управления рисками, существуют определенные ограничения и вызовы, которые могут уменьшить ее эффективность. Рассмотрим основные из них.

#### Основные ограничения диверсификации

1. **Корреляция активов во время кризисов**:
    - В периоды финансовых кризисов корреляция между активами может увеличиваться, что снижает преимущества диверсификации. Активы, которые обычно имеют низкую корреляцию, могут начать двигаться в одном направлении в ответ на глобальные рыночные события.

2. **Систематический риск**:
    - Диверсификация может уменьшить несистематический риск (риск, связанный с отдельными компаниями или секторами), но она не способна устранить систематический риск (риск, связанный с общими рыночными условиями).

3. **Высокие транзакционные издержки**:
    - Увеличение числа активов в портфеле может привести к увеличению транзакционных издержек, связанных с покупкой, продажей и управлением активами. Это может отрицательно сказаться на общей доходности портфеля.

4. **Сложность управления**:
    - Управление диверсифицированным портфелем требует значительных усилий и времени для мониторинга и ребалансировки. Это особенно актуально для индивидуальных инвесторов или небольших инвестиционных компаний.

5. **Ограниченная информация**:
    - Доступ к точной и своевременной информации по каждому активу может быть затруднен. Нехватка информации может привести к принятию неверных инвестиционных решений.

### Пример иллюстрации ограничения диверсификации на Python

Рассмотрим пример, демонстрирующий влияние высокой корреляции активов во время кризиса на эффективность диверсификации.


```python
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# Задаем случайные значения для доходностей четырех активов в нормальных условиях
np.random.seed(42)
normal_returns = np.random.randn(1000, 4) * 0.01 + 0.001

# Задаем значения для доходностей четырех активов в условиях кризиса (увеличение корреляции)
crisis_returns = normal_returns + np.random.randn(1000, 1) * 0.05

# Задаем веса для диверсифицированного портфеля
weights = np.array([0.25, 0.25, 0.25, 0.25])

def portfolio_performance(returns, weights):
    """
    Вычисляет доходность и риск (стандартное отклонение) портфеля.

    Parameters:
    returns (numpy.ndarray): Матрица доходностей активов.
    weights (numpy.ndarray): Вектор весов активов в портфеле.

    Returns:
    tuple: Доходность портфеля и риск портфеля (стандартное отклонение).
    """
    mean_returns = returns.mean(axis=0)
    cov_matrix = np.cov(returns, rowvar=False)
    portfolio_return = np.dot(weights, mean_returns)
    portfolio_std_dev = np.sqrt(np.dot(weights.T, np.dot(cov_matrix, weights)))
    return portfolio_return, portfolio_std_dev

# Вычисляем доходность и риск портфеля в нормальных условиях
normal_portfolio_return, normal_portfolio_std_dev = portfolio_performance(normal_returns, weights)

# Вычисляем доходность и риск портфеля в условиях кризиса
crisis_portfolio_return, crisis_portfolio_std_dev = portfolio_performance(crisis_returns, weights)

# Выводим результаты
print(f'Доходность портфеля (нормальные условия): {normal_portfolio_return:.4f}')
print(f'Риск портфеля (нормальные условия): {normal_portfolio_std_dev:.4f}')
print(f'Доходность портфеля (кризис): {crisis_portfolio_return:.4f}')
print(f'Риск портфеля (кризис): {crisis_portfolio_std_dev:.4f}')

# Визуализируем доходности активов и портфеля
plt.figure(figsize=(12, 6))
sns.histplot(normal_returns, kde=True, stat='density', element='step', common_norm=False, label='Нормальные условия')
sns.histplot(crisis_returns, kde=True, stat='density', element='step', color='r', common_norm=False, label='Кризис')
plt.title('Ограничение диверсификации в условиях кризиса')
plt.xlabel('Доходность')
plt.ylabel('Плотность')
plt.axvline(normal_portfolio_return, color='blue', linestyle='--', label='Доходность портфеля (нормальные условия)')
plt.axvline(crisis_portfolio_return, color='red', linestyle='--', label='Доходность портфеля (кризис)')
plt.legend()
plt.show()
```

    Доходность портфеля (нормальные условия): 0.0012
    Риск портфеля (нормальные условия): 0.0049
    Доходность портфеля (кризис): -0.0013
    Риск портфеля (кризис): 0.0496
    


    
![png](output_35_1.png)
    


`Используемые и рекомендуемые источники:`

1.	Е.А.Ковалев, Г.А.Медведев. Теория вероятностей и математическая статистика для экономистов.
2.	А. Лобанов. Энциклопедия финансового риск-менеджмента
3.	У.Шарп и др. Инвестиции
